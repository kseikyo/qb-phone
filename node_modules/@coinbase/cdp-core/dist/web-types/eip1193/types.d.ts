import { Call, Chain, Transport } from 'viem';
import { Mutate, StoreApi } from 'zustand';
import { EvmAddress, Hex, User } from '../types.js';
import * as ox_Provider from "ox/Provider";
export type CDPEmbeddedWalletConfig<chains extends readonly [Chain, ...Chain[]] = readonly [Chain, ...Chain[]]> = {
    chains: chains;
    transports: Record<chains[number]["id"], Transport>;
    announceProvider?: boolean;
};
export type EIP1193Provider = ox_Provider.Provider;
export type CDPEmbeddedWallet = {
    provider: EIP1193Provider;
};
export type EIP1193RequestFunctionType = ox_Provider.Provider;
export type AccountsRequest = {
    method: "eth_accounts";
    params: [];
};
export type RequestAccountsRequest = {
    method: "eth_requestAccounts";
    params: [];
};
export type PersonalSignMessage = string | {
    raw: `0x${string}` | Uint8Array;
};
export type PersonalSignRequest = {
    method: "personal_sign";
    params: [PersonalSignMessage, `0x${string}`];
};
export type SendTransactionRequestParams = [
    {
        chainId?: `0x${string}`;
        data?: Hex;
        from: EvmAddress;
        to: EvmAddress;
        value: Hex;
        nonce?: Hex;
        gas?: Hex;
        maxFeePerGas?: Hex;
        maxPriorityFeePerGas?: Hex;
        type?: "eip1559";
    }
];
export type SendTransactionRequest = {
    method: "eth_sendTransaction";
    params: SendTransactionRequestParams;
};
export type SignTypedDataRequest = {
    method: "eth_signTypedData_v4";
    params: [EvmAddress, string];
};
export type EthSignRequest = {
    method: "eth_sign";
    params: [Hex, EvmAddress];
};
export type ChainIdRequest = {
    method: "eth_chainId";
    params: [];
};
export type WalletDisconnectRequest = {
    method: "wallet_disconnect";
    params: [];
};
export type SwitchEthereumChainRequest = {
    method: "wallet_switchEthereumChain";
    params: [{
        chainId: string;
    }];
};
export type SendCallsRequest = {
    method: "wallet_sendCalls";
    params: [{
        calls: Call[];
    }];
};
export type GetCallsStatusRequest = {
    method: "wallet_getCallsStatus";
    params: [`0x${string}`];
};
export type GetCapabilitiesRequest = {
    method: "wallet_getCapabilities";
    params: [];
};
export type UnknownRequest = {
    method: string;
    params: unknown[];
};
export type ProviderRequest = AccountsRequest | RequestAccountsRequest | PersonalSignRequest | SendTransactionRequest | SignTypedDataRequest | EthSignRequest | ChainIdRequest | WalletDisconnectRequest | SwitchEthereumChainRequest | SendCallsRequest | GetCallsStatusRequest | GetCapabilitiesRequest;
export type ExactPartial<T> = {
    [P in keyof T]?: T[P] extends object ? ExactPartial<T[P]> : T[P];
};
export type ProviderState = {
    chainId: number;
    setChainId: (chainId: number) => void;
    chains: readonly [Chain, ...Chain[]];
    user: User | null;
    setUser: (user: User | null) => void;
};
export type ProviderStoreInstance = Mutate<StoreApi<ProviderState>, [
    ["zustand/subscribeWithSelector", never],
    ["zustand/persist", ProviderState]
]>;
export type WalletCapabilities = {
    [chainId: Hex]: {
        atomic: {
            status: "supported" | "unsupported";
        };
        paymasterService: {
            supported: boolean;
        };
    };
};
