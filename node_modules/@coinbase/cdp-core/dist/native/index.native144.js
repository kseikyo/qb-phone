import { encoder as t, decoder as o } from "./index.native109.js";
import { encodeBase64 as c, decodeBase64 as a } from "./index.native166.js";
function i(r) {
  if (Uint8Array.fromBase64)
    return Uint8Array.fromBase64(typeof r == "string" ? r : o.decode(r), {
      alphabet: "base64url"
    });
  let e = r;
  e instanceof Uint8Array && (e = o.decode(e)), e = e.replace(/-/g, "+").replace(/_/g, "/").replace(/\s/g, "");
  try {
    return a(e);
  } catch {
    throw new TypeError("The input to be decoded is not correctly encoded.");
  }
}
function p(r) {
  let e = r;
  return typeof e == "string" && (e = t.encode(e)), Uint8Array.prototype.toBase64 ? e.toBase64({ alphabet: "base64url", omitPadding: !0 }) : c(e).replace(/=/g, "").replace(/\+/g, "-").replace(/\//g, "_");
}
export {
  i as decode,
  p as encode
};
