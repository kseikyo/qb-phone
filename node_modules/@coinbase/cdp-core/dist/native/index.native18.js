import { createEndUserEvmAccount as c } from "@coinbase/cdp-api-client";
import { Analytics as s } from "./index.native30.js";
import "./index.native31.js";
import { toAuthStateUser as m } from "./index.native35.js";
import { InternalError as u } from "./index.native24.js";
import { validateUserCanCreateAccount as i } from "./index.native44.js";
import { getCoreAuthManager as A, getConfig as l } from "./index.native28.js";
async function S() {
  s.sendActionCallEvent({ name: "create_evm_eoa_account" });
  const t = A(), { user: o, authState: a } = i(
    t.getUser(),
    t.getAuthState(),
    "eoa"
  ), n = await c(l().projectId, o.userId, {
    walletSecretId: await t.getWalletSecretId()
  }), e = m(n);
  await t.setAuthState({
    ...a,
    user: e
  });
  const r = e.evmAccounts?.[0];
  if (!r)
    throw new u(
      "EVM EOA account was not created. Check the network log for more details."
    );
  return r;
}
export {
  S as createEvmEoaAccount
};
