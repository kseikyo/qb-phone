import { createEndUserSolanaAccount as c } from "@coinbase/cdp-api-client";
import { Analytics as s } from "./index.web28.js";
import "./index.web29.js";
import { toAuthStateUser as u } from "./index.web33.js";
import { InternalError as i } from "./index.web23.js";
import { validateUserCanCreateAccount as l } from "./index.web43.js";
import { getCoreAuthManager as m, getConfig as A } from "./index.web39.js";
async function C() {
  s.sendActionCallEvent({ name: "create_solana_account" });
  const t = m(), { user: o, authState: r } = l(
    t.getUser(),
    t.getAuthState(),
    "solana"
  ), n = await c(A().projectId, o.userId, {
    walletSecretId: await t.getWalletSecretId()
  }), e = u(n);
  await t.setAuthState({
    ...r,
    user: e
  });
  const a = e.solanaAccounts?.[0];
  if (!a)
    throw new i(
      "Solana account was not created. Check the network log for more details."
    );
  return a;
}
export {
  C as createSolanaAccount
};
