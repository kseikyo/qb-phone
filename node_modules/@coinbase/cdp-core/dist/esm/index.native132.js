import { sendUserOperation as c } from "./index.native7.js";
import { isChainIdSupportedForCDPUserOps as u, userOperationChainIdToNameMapping as p } from "./index.native40.js";
import { validateUserHasEvmSmartAccount as d, RPCRequestError as o, STANDARD_ERROR_CODES as s } from "./index.native26.js";
async function R(r, t) {
  const [{ calls: n }] = r, i = (await d()).evmSmartAccounts[0], a = t.getState().chainId;
  if (!u(a))
    throw new o(
      s.rpc.invalidParams,
      "Chain ID is not supported for user operations"
    );
  try {
    return (await c({
      evmSmartAccount: i,
      calls: m(n),
      network: p[a]
    })).userOperationHash;
  } catch (e) {
    throw new o(
      s.rpc.transactionRejected,
      e instanceof Error ? e.message : "User operation failed"
    );
  }
}
function m(r) {
  return r.map((t) => ({
    to: t.to,
    data: t.data,
    value: t.value ? BigInt(t.value) : void 0
  }));
}
export {
  R as handleSendCalls
};
